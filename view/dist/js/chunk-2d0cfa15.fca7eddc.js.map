{"version":3,"sources":["webpack:///./src/views/home.vue?89e6","webpack:///./src/views/home.vue?d59c","webpack:///./src/views/home.vue?70c1","webpack:///./src/views/home.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","on","inputProject","installDone","$","alas","rules","model","value","callback","$$v","$set","expression","scopedSlots","_u","key","fn","_g","staticClass","input","_v","deleteMode","undefined","$event","projects","length","_e","_l","project","target","_s","remove","create","staticRenderFns","props","config","install","inputFile","createForm","createName","reload","requests","projectDir","map","name","replace","click","files","make","$init","JSON","parse","message","includes","$o","save","start","open","confirm","done","params","close","component","VBtn","VCard","VCardTitle","VCol","VIcon","VRow","VSpacer","VTextField","VTooltip"],"mappings":"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","file":"js/chunk-2d0cfa15.fca7eddc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"inputFile\",attrs:{\"hidden\":\"\",\"type\":\"file\",\"accept\":\".json\"},on:{\"change\":_vm.inputProject}}),_c('ui-install',{ref:\"install\",on:{\"done\":_vm.installDone}}),_c('ui-form',{ref:\"createForm\",attrs:{\"title\":\"建立專案\"}},[_c('v-text-field',{attrs:{\"label\":\"名稱\",\"outlined\":\"\",\"rules\":_vm.$.alas.rules(['#ms.required'])},model:{value:(_vm.$.createName),callback:function ($$v) {_vm.$set(_vm.$, \"createName\", $$v)},expression:\"$.createName\"}})],1),_c('ui-app-bar',{attrs:{\"title\":\"首頁\"}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({staticClass:\"mr-2\",attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":_vm.input}},on),[_c('v-icon',[_vm._v(\"mdi-location-enter\")])],1)]}}])},[_c('span',[_vm._v(\"引入專案\")])]),_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"icon\":\"\",\"small\":\"\",\"color\":_vm.$.deleteMode ? 'red' : undefined},on:{\"click\":function($event){_vm.$.deleteMode = !_vm.$.deleteMode}}},on),[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1)]}}])},[_c('span',[_vm._v(\"刪除專案\")])])],1),(_vm.$.projects.length === 0)?_c('div',{staticClass:\"text-center pt-5 subtitle-1 grey--text\"},[_c('div',[_vm._v(\"😥\")]),_c('div',[_vm._v(\"一個專案也沒有\")])]):_vm._e(),_c('v-row',{staticClass:\"pa-5 pt-3\"},_vm._l((_vm.$.projects),function(project){return _c('v-col',{key:project,attrs:{\"cols\":4}},[_c('v-card',{attrs:{\"light\":\"\",\"to\":_vm.$.deleteMode ? undefined : _vm.target(project)}},[_c('v-card-title',[_vm._v(\" \"+_vm._s(project)+\" \"),_c('v-spacer'),(_vm.$.deleteMode)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.remove(project)}}},[_c('v-icon',[_vm._v(\"mdi-trash-can-outline\")])],1):_vm._e()],1)],1)],1)}),1),_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"fixed\":\"\",\"right\":\"\",\"bottom\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.create}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { __awaiter } from \"tslib\";\r\nimport * as requests from '@/requests';\r\nimport { getConfig, readFileText } from '@/utils';\r\nimport { action, alas } from '@/alas';\r\nimport { defineComponent, reactive, onMounted, ref } from '@vue/composition-api';\r\nexport default defineComponent({\r\n    props: {},\r\n    setup() {\r\n        let config = getConfig();\r\n        // =================\r\n        //\r\n        // refs\r\n        //\r\n        let install = ref(null);\r\n        let inputFile = ref(null);\r\n        let createForm = ref(null);\r\n        // =================\r\n        //\r\n        // state\r\n        //\r\n        let $ = reactive({\r\n            alas,\r\n            projects: [],\r\n            createName: '',\r\n            deleteMode: false\r\n        });\r\n        // =================\r\n        //\r\n        // mounted\r\n        //\r\n        onMounted(() => {\r\n            reload();\r\n        });\r\n        // =================\r\n        //\r\n        // methods\r\n        //\r\n        let reload = () => __awaiter(this, void 0, void 0, function* () {\r\n            $.projects = (yield requests.readdir(config.projectDir)).map(name => name.replace('.json', ''));\r\n        });\r\n        let input = () => {\r\n            inputFile.value.click();\r\n        };\r\n        let inputProject = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!inputFile.value.value) {\r\n                return null;\r\n            }\r\n            let target = yield readFileText(inputFile.value.files[0]);\r\n            let project = alas.make('project', 'project').$init(JSON.parse(target));\r\n            if (project.name == null) {\r\n                return action.message('error', '格式不正確');\r\n            }\r\n            if ($.projects.includes(project.name)) {\r\n                return action.message('error', '專案已存在');\r\n            }\r\n            yield project.$o.save.start();\r\n            install.value.open(project);\r\n            inputFile.value.value = '';\r\n            reload();\r\n        });\r\n        let create = () => {\r\n            createForm.value.open(() => __awaiter(this, void 0, void 0, function* () {\r\n                if ($.projects.includes($.createName)) {\r\n                    return action.message('error', '專案已存在。');\r\n                }\r\n                let project = alas.make('project', 'project').$init({\r\n                    name: $.createName\r\n                });\r\n                yield project.$o.save.start();\r\n                install.value.open(project);\r\n                reload();\r\n            }));\r\n        };\r\n        let remove = (project) => __awaiter(this, void 0, void 0, function* () {\r\n            action.confirm('確定刪除專案？', (done) => __awaiter(this, void 0, void 0, function* () {\r\n                yield requests.remove(`${config.projectDir}/${project}.json`);\r\n                reload();\r\n                done();\r\n            }));\r\n        });\r\n        let target = (project) => {\r\n            return {\r\n                name: 'project.overview',\r\n                params: {\r\n                    project: project\r\n                }\r\n            };\r\n        };\r\n        let installDone = () => {\r\n            install.value.close();\r\n        };\r\n        // =================\r\n        //\r\n        // done\r\n        //\r\n        return {\r\n            $,\r\n            reload,\r\n            input,\r\n            inputProject,\r\n            inputFile,\r\n            create,\r\n            target,\r\n            remove,\r\n            install,\r\n            installDone,\r\n            createForm\r\n        };\r\n    }\r\n});\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./home.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=648aa82c&\"\nimport script from \"./home.vue?vue&type=script&lang=ts&\"\nexport * from \"./home.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VBtn,VCard,VCardTitle,VCol,VIcon,VRow,VSpacer,VTextField,VTooltip})\n"],"sourceRoot":""}